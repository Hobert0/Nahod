@using System.Globalization
@using System.Text.RegularExpressions
@using Cms.Models
@using Cms.Controllers
@model Cms.Models.MultipleIndexModel

@{
    HelperController helper = new HelperController();
}

<div class="top-banner-wrapper banner-wrapper">
    @{
        var slideshows = Model.SlideshowModel.Where(o => o.page == "hp-top");
        foreach (var slideshow in slideshows)
        {
            var url = slideshow.url != "" ? slideshow.url : "#";

            <a href="@url" class="top-banner banner" style="background-image: url(Uploads/slideshow/@slideshow.image);">
                <div class="container">

                    @{
                        if (slideshow.header != null)
                        {
                            <div class="header">@slideshow.header</div>
                        }

                        if (slideshow.text != null)
                        {
                            <div class="text">@slideshow.text</div>
                        }

                        if (slideshow.subtext != null)
                        {
                            <div class="subtext">@slideshow.subtext</div>
                        }
                        else
                        {
                            <div class="subtext d-none">@slideshow.subtext</div>
                        }

                        <span class="rounded-button">@slideshow.button</span>
                    }

                </div>
            </a>
        }
    }
</div>
<div class="container-fluid w-75">
    <div class="row benefits">
        <div class="col-md col-6">
            <div class="row d-flex align-items-center">
                <div class="col-md-2 pr-0">
                    <img class="icon" src="~/Content/images/price-tag.svg">
                </div>
                <div class="col-md-10 pl-2">
                    <p class="header">Zľava 5-15%</p>
                    <p class="text">Ihneď po <a href="#" class="register-modal"><u>registrácii</u></a></p>
                </div>
            </div>
        </div>
        <div class="col-md col-6">
            <div class="row d-flex align-items-center">
                <div class="col-md-2 pr-0">
                    <img class="icon" src="~/Content/images/fast.svg">
                </div>
                <div class="col-md-10 pl-2">
                    <p class="header">Doprava zdarma</p>
                    <p class="text">Pri objednávke nad 49 €</p>
                </div>
            </div>
        </div>
        <div class="col-md col-6">
            <div class="row d-flex align-items-center">
                <div class="col-md-2 pr-0">
                    <img class="icon" src="~/Content/images/gift.svg">
                </div>
                <div class="col-md-10 pl-2">
                    <p class="header">Darčeky</p>
                    <p class="text">K nákupu nad 49 €</p>
                </div>
            </div>
        </div>
        <div class="col-md col-6">
            <div class="row d-flex align-items-center">
                <div class="col-md-2 pr-0">
                    <img class="icon" src="~/Content/images/fishing.svg">
                </div>
                <div class="col-md-10 pl-2">
                    <p class="header">Poradenstvo</p>
                    <p class="text">Cez 20 r. skúseností</p>
                </div>
            </div>
        </div>
    </div>
    <div class="row types">
        @{
            var types = Model.TypesModel;
            foreach (var type in types.OrderBy(i => i.id))
            {
                <a href="/typ/@type.slug" class="col-md-3 pr-1 pl-1 categoryblock col-6">
                    <img src="/uploads/@type.image">
                    <p class="header">@type.name</p>
                </a>
            }

        }
        <a href="/kat/rybarske-navijaky" class="col-md-3 pr-1 pl-1 categoryblock col-6">
            <img src="/uploads/images/navijaky.png">
            <p class="header">Navijaky</p>
        </a>
        <a href="/kat/rybarske-pruty" class="col-md-3 pr-1 pl-1 categoryblock col-6">
            <img src="/uploads/images/pruty.png">
            <p class="header">Prúty</p>
        </a>
        <a href="/kat/stojany-a-vidlicky" class="col-md-3 pr-1 pl-1 categoryblock col-6">
            <img src="/uploads/images/stojany.png">
            <p class="header">Stojany</p>
        </a>
        <a href="/kat/kemping-outdoor/kresla-a-stolicky" class="col-md-3 pr-1 pl-1 categoryblock col-6">
            <img src="/uploads/images/kresla.png">
            <p class="header">Kreslá</p>
        </a>
        <a href="/kat/kemping-outdoor/bivaky-a-pristresky" class="col-md-3 pr-1 pl-1 categoryblock col-6">
            <img src="/uploads/images/bivaky pristresky.png">
            <p class="header">Bivaky a prístrešky</p>
        </a>
        <a href="/kat/clny-motory-sonary" class="col-md-3 pr-1 pl-1 categoryblock col-6">
            <img src="/uploads/images/clny a motory.png">
            <p class="header">Člny a motory</p>
        </a>
        <a href="/kat/oblecenie-a-obuv" class="col-md-3 pr-1 pl-1 categoryblock col-6">
            <img src="/uploads/images/oblecenie.png">
            <p class="header">Oblečenie</p>
        </a>
        <a href="/kat/tasky-batohy-a-puzdra" class="col-md-3 pr-1 pl-1 categoryblock col-6">
            <img src="/uploads/images/tasky a obaly.png">
            <p class="header">Tašky a obaly</p>
        </a>
    </div>
    <div class="row more-types">
        <div class="col-md-12">
            <button id="showmore" class="rounded-button">
                Zobraziť ďalšie kategórie
            </button>
            <button id="showless" class="rounded-button" style="display:none;">
                Zobraziť menej
            </button>
        </div>
    </div>
    <div class="row products">
        <div class="col-md-12 no-gutters">
            <div class="row">
                <h2 class="col-md-12">
                    <a href="/kat/top-akcie">
                        Akciové produkty
                    </a>
                </h2>
            </div>
            <div class="row products-row">
                @{
                    Html.RenderPartial("_ProductItem");
                }
            </div>
        </div>
    </div>
    <div class="row products">
        <div class="col-md-12 no-gutters">
            <div class="row">
                <h2 class="col-md-12">
                    <a href="/kat/novinky-v-e-shope">
                        Novinky
                    </a>
                </h2>
            </div>
            <div class="row products-row">
                @{
                    var prods2 = Model.ProductModel.OrderByDescending(o => o.id).Take(10);

                    int order = Model.ProductModel.Count() - 1;
                    if (order >= 9)
                    {
                        order = 9;
                    }

                    var lastNewProd = Model.ProductModel.OrderByDescending(o => o.id).ElementAt(order);

                    foreach (var prod in prods2)
                    {
                        bool isDiscounted = false;
                        var variants = Model.VariantModel.Where(o => o.prod_id == prod.id).OrderBy(o => o.num).ToList();

                        if (variants.Count() > 0)
                        {
                            foreach (var variant in variants)
                            {
                                if (variant.discountprice != null)
                                {
                                    isDiscounted = true;

                                    break;
                                }
                            }
                        }
                        else
                        {
                            if (prod.discountprice != null)
                            {
                                isDiscounted = true;
                            }
                        }

                        var slug = helper.ToUrlSlug(prod.title);
                        <div class="col-md product mx-1">
                            <a href="/detail-produktu/@prod.id/@slug">
                                <div class="thumb" style="background-image: url(/Uploads/@prod.image); height: 11vw;background-size:contain;">
                                </div>
                                <div class="prod-labels">
                                    @{
                                        if (isDiscounted == true)
                                        {
                                            <span class="prod-discount">akcia</span>
                                        }
                                    }

                                    @{
                                        if (DateTime.Compare(DateTime.Parse(prod.date), DateTime.Parse(lastNewProd.date)) >= 0)
                                        {
                                            <span class="prod-new">novinka</span>
                                        }
                                    }
                                </div>
                                <div class="prod-header">@Html.Raw(prod.title)</div>
                                @{
                                    var shortdescription = "";
                                    if (prod.description != null && prod.description != "")
                                    {
                                        shortdescription = Regex.Replace(prod.description, "<.*?>", String.Empty);
                                        if (shortdescription.Length > 60)
                                        {
                                            shortdescription = shortdescription.Substring(0, 60) + "...";
                                        }
                                    }
                                }
                                <div class="prod-text">@Html.Raw(shortdescription)</div>
                                <div class="prod-prices">
                                    @{
                                        decimal variantPriceFrom = 99999;
                                        string isVariant = "false";
                                        int firstAttrId = 0;
                                        foreach (var variant in variants)
                                        {

                                            if (firstAttrId == 0)
                                            {
                                                firstAttrId = variant.attribute_id;
                                            }

                                            if (firstAttrId == variant.attribute_id)
                                            {
                                                if (variant.discountprice != null)
                                                {
                                                    if (variant.discountprice < variantPriceFrom)
                                                    {
                                                        variantPriceFrom = (decimal)variant.discountprice;
                                                    }
                                                }
                                                else
                                                {

                                                    decimal thisPrice = 0;
                                                    //rating
                                                    if (Session["username"] != null)
                                                    {
                                                        int rating = Model.AllUsersMetaModel.FirstOrDefault().rating;
                                                        decimal defaultPrice = (decimal)variant.price;
                                                        decimal ratingPrice = 0;

                                                        switch (rating)
                                                        {
                                                            case 1:
                                                                ratingPrice = (decimal)0.95 * defaultPrice;
                                                                break;
                                                            case 2:
                                                                ratingPrice = (decimal)0.9 * defaultPrice;
                                                                break;
                                                            case 3:
                                                                ratingPrice = (decimal)0.85 * defaultPrice;
                                                                break;
                                                        }

                                                        thisPrice = ratingPrice;
                                                    }
                                                    else
                                                    {
                                                        thisPrice = (decimal)variant.price;
                                                    }

                                                    if (thisPrice < variantPriceFrom)
                                                    {
                                                        variantPriceFrom = thisPrice;
                                                    }

                                                }
                                            }

                                            isVariant = "true";
                                        }

                                        decimal actualPrice = (decimal)0.0;
                                        if (variantPriceFrom != 99999)
                                        {
                                            <span class="prod-price-from">od @variantPriceFrom.ToString("N2") €</span>
                                        }
                                        else
                                        {

                                            if (prod.discountprice != null)
                                            {
                                                <span class="prod-discount">@prod.price.ToString("N2") €</span><span class="prod-base">@(((decimal)prod.discountprice).ToString("N2")) €</span>
                                                actualPrice = (decimal)prod.discountprice;
                                            }
                                            else
                                            {
                                                //rating
                                                if (Session["username"] != null)
                                                {
                                                    int rating = Model.AllUsersMetaModel.FirstOrDefault().rating;
                                                    decimal defaultPrice = prod.price;
                                                    decimal ratingPrice = 0;

                                                    switch (rating)
                                                    {
                                                        case 1:
                                                            ratingPrice = (decimal)0.95 * defaultPrice;
                                                            break;
                                                        case 2:
                                                            ratingPrice = (decimal)0.9 * defaultPrice;
                                                            break;
                                                        case 3:
                                                            ratingPrice = (decimal)0.85 * defaultPrice;
                                                            break;
                                                    }

                                                    <span class="prod-discount">@defaultPrice.ToString("N2") €</span><span class="prod-base">@ratingPrice.ToString("N2") €</span>
                                                    actualPrice = ratingPrice;
                                                }
                                                else
                                                {
                                                    <span class="prod-base">@prod.price.ToString("N2") €</span>
                                                    actualPrice = prod.price;
                                                }
                                            }
                                        }
                                    }
                                </div>
                            </a>

                            @{
                                var actualPriceStr = actualPrice.ToString("N2").Replace(",", ".");
                            }

                            <span onclick='addToCart(@prod.id, @isVariant, @actualPriceStr)' class="prod-add-to-cart">
                                <img class="prod-icon" src="~/Content/images/cart.svg" />
                                <span>Pridať do košíka</span>
                            </span>
                        </div>
                    }
                }
            </div>
        </div>
    </div>
</div>
<div class="container-fluid" id="hp-newsletter">
    <div class="row hp-newsletter">
        <div class="col-md-4 offset-md-2">
            <div class="hp-header">Získajte okamžitú zľavu 10%</div>
            <div class="hp-text">Chcete byť pravidelne informovaní o novinkách a zvýhodnených akciách?</div>
            <div class="hp-text font-weight-bold">Prihláste sa k odberu noviniek</div>
        </div>
        <div class="col-md-4">
            <div class="d-flex align-items-center hp-email-wrapper">
                <!--
                <input type="email" name="newsletter-email" placeholder="E-mail">
                <a href="#" class="rect-button">Prihlásiť sa k odberu</a>
                -->

                @using (Html.BeginForm("Subscribe", "Newsletter", FormMethod.Post, new { enctype = "multipart/form-data", id = "Subscribeform" }))
                {
                    @Html.AntiForgeryToken()
                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                    @Html.EditorFor(model => model.UsersModel.Email, new { htmlAttributes = new { @id = "subscriberEmail", placeholder = "E-mail" } })
                    <a class="rect-button">Prihlásiť sa k odberu</a>
                    <button data-sitekey="6LcR9pQaAAAAAIXX1pzZbO8Esnn4EAX1sqOilguE" class="g-recaptcha d-none" data-callback="onSubmit" data-action="submit">Prihlásiť sa k odberu</button>
                    @Html.ValidationMessageFor(model => model.UsersModel.Email, "", new { @class = "text-danger" })
                }
            </div>
            <div class="hp-checkbox-wrapper">
                <input type="checkbox" id="hp-newsletter-checkbox"><label for="hp-newsletter-checkbox">Súhlasím so <a href="#">spracúvaním osobných údajov.</a></label>
            </div>
        </div>
        <div class="container">
            @Html.Raw(TempData["msg"])
        </div>
    </div>

</div>
<div class="middle-banner-wrapper banner-wrapper">
    @{
        slideshows = Model.SlideshowModel.Where(o => o.page == "hp-middle");
        foreach (var slideshow in slideshows)
        {

            var url = slideshow.url != "" ? slideshow.url : "#";

            <a href="@url" class="middle-banner banner" style="background-image: url(Uploads/slideshow/@slideshow.image);">
                <div class="container">

                    @{
                        if (slideshow.header != null)
                        {
                            <div class="header">@slideshow.header</div>
                        }

                        if (slideshow.text != null)
                        {
                            <div class="text">@slideshow.text</div>
                        }

                        if (slideshow.subtext != null)
                        {
                            <div class="subtext">@slideshow.subtext</div>
                        }
                        else
                        {
                            <div class="subtext d-none">@slideshow.subtext</div>
                        }

                        <span href="#" class="rounded-button">@slideshow.button</span>
                    }

                </div>
            </a>
        }
    }
</div>
<div class="container-fluid w-75">
    <div class="row products">
        <div class="col-md-12 no-gutters">
            <div class="row">
                <h2 class="col-md-12">
                    <a href="/kat/odporucame">
                        Odporúčané produkty
                    </a>
                </h2>
            </div>
            <div class="row products-row">
                @{
                    prods2 = Model.ProductModel.Where(o => o.recommended == true).OrderByDescending(o => o.id).Take(10);
                    foreach (var prod in prods2)
                    {
                        bool isDiscounted = false;
                        var variants = Model.VariantModel.Where(o => o.prod_id == prod.id).OrderBy(o => o.num).ToList();

                        if (variants.Count() > 0)
                        {
                            foreach (var variant in variants)
                            {
                                if (variant.discountprice != null)
                                {
                                    isDiscounted = true;

                                    break;
                                }
                            }
                        }
                        else
                        {
                            if (prod.discountprice != null)
                            {
                                isDiscounted = true;
                            }
                        }

                        var slug = helper.ToUrlSlug(prod.title);
                        <div class="col-md product mx-1">
                            <a href="/detail-produktu/@prod.id/@slug">
                                <div class="thumb" style="background-image: url(/Uploads/@prod.image); height: 11vw;background-size:contain;"></div>
                                <div class="prod-labels">
                                    @{
                                        if (isDiscounted == true)
                                        {
                                            <span class="prod-discount">akcia</span>
                                        }
                                    }

                                    @{
                                        if (DateTime.Compare(DateTime.Parse(prod.date), DateTime.Parse(lastNewProd.date)) >= 0)
                                        {
                                            <span class="prod-new">novinka</span>
                                        }
                                    }
                                </div>
                                <div class="prod-header">@Html.Raw(prod.title)</div>
                                @{
                                    var shortdescription = "";
                                    if (prod.description != null && prod.description != "")
                                    {
                                        shortdescription = Regex.Replace(prod.description, "<.*?>", String.Empty);
                                        if (shortdescription.Length > 60)
                                        {
                                            shortdescription = shortdescription.Substring(0, 60) + "...";
                                        }
                                    }
                                }
                                <div class="prod-text">@Html.Raw(shortdescription)</div>
                                <div class="prod-prices">
                                    @{
                                        decimal variantPriceFrom = 99999;
                                        string isVariant = "false";
                                        int firstAttrId = 0;
                                        foreach (var variant in variants)
                                        {

                                            if (firstAttrId == 0)
                                            {
                                                firstAttrId = variant.attribute_id;
                                            }

                                            if (firstAttrId == variant.attribute_id)
                                            {
                                                if (variant.discountprice != null)
                                                {
                                                    if (variant.discountprice < variantPriceFrom)
                                                    {
                                                        variantPriceFrom = (decimal)variant.discountprice;
                                                    }
                                                }
                                                else
                                                {

                                                    decimal thisPrice = 0;
                                                    //rating
                                                    if (Session["username"] != null)
                                                    {
                                                        int rating = Model.AllUsersMetaModel.FirstOrDefault().rating;
                                                        decimal defaultPrice = (decimal)variant.price;
                                                        decimal ratingPrice = 0;

                                                        switch (rating)
                                                        {
                                                            case 1:
                                                                ratingPrice = (decimal)0.95 * defaultPrice;
                                                                break;
                                                            case 2:
                                                                ratingPrice = (decimal)0.9 * defaultPrice;
                                                                break;
                                                            case 3:
                                                                ratingPrice = (decimal)0.85 * defaultPrice;
                                                                break;
                                                        }

                                                        thisPrice = ratingPrice;
                                                    }
                                                    else
                                                    {
                                                        thisPrice = (decimal)variant.price;
                                                    }

                                                    if (thisPrice < variantPriceFrom)
                                                    {
                                                        variantPriceFrom = thisPrice;
                                                    }

                                                }
                                            }

                                            isVariant = "true";
                                        }

                                        decimal actualPrice = (decimal)0.0;
                                        if (variantPriceFrom != 99999)
                                        {
                                            <span class="prod-price-from">od @variantPriceFrom.ToString("N2") €</span>
                                        }
                                        else
                                        {

                                            if (prod.discountprice != null)
                                            {
                                                <span class="prod-discount">@prod.price.ToString("N2") €</span><span class="prod-base">@(((decimal)prod.discountprice).ToString("N2")) €</span>
                                                actualPrice = (decimal)prod.discountprice;
                                            }
                                            else
                                            {
                                                //rating
                                                if (Session["username"] != null)
                                                {
                                                    int rating = Model.AllUsersMetaModel.FirstOrDefault().rating;
                                                    decimal defaultPrice = prod.price;
                                                    decimal ratingPrice = 0;

                                                    switch (rating)
                                                    {
                                                        case 1:
                                                            ratingPrice = (decimal)0.95 * defaultPrice;
                                                            break;
                                                        case 2:
                                                            ratingPrice = (decimal)0.9 * defaultPrice;
                                                            break;
                                                        case 3:
                                                            ratingPrice = (decimal)0.85 * defaultPrice;
                                                            break;
                                                    }

                                                    <span class="prod-discount">@defaultPrice.ToString("N2") €</span><span class="prod-base">@ratingPrice.ToString("N2") €</span>
                                                    actualPrice = ratingPrice;
                                                }
                                                else
                                                {
                                                    <span class="prod-base">@prod.price.ToString("N2") €</span>
                                                    actualPrice = prod.price;
                                                }
                                            }

                                        }
                                    }
                                </div>
                            </a>

                            @{
                                var actualPriceStr = actualPrice.ToString("N2").Replace(",", ".");
                            }

                            <span onclick='addToCart(@prod.id, @isVariant, @actualPriceStr)' class="prod-add-to-cart">
                                <img class="prod-icon" src="~/Content/images/cart.svg">
                                <span>Pridať do košíka</span>
                            </span>
                        </div>
                    }
                }
            </div>
        </div>
    </div>
    <div class="row bottom-banner-row">
        <div class="col-md-6 pr-1 col-6">
            <div class="bottom-banner-wrapper banner-wrapper">
                @{
                    slideshows = Model.SlideshowModel.Where(o => o.page == "hp-bottom-left");
                    foreach (var slideshow in slideshows)
                    {

                        var url = slideshow.url != "" ? slideshow.url : "#";

                        <a href="@url" class="bottom-banner banner" style="background-image: url('/Uploads/slideshow/@Html.Raw(slideshow.image)');">
                            <div class="container">

                                @{
                                    if (slideshow.header != null)
                                    {
                                        <div class="header overfooter">@slideshow.header</div>
                                    }
                                }

                            </div>
                        </a>
                    }
                }
            </div>
        </div>
        <div class="col-md-6 pl-1 col-6">
            <div class="bottom-banner-wrapper banner-wrapper">
                @{
                    slideshows = Model.SlideshowModel.Where(o => o.page == "hp-bottom-right");
                    foreach (var slideshow in slideshows)
                    {

                        var url = slideshow.url != "" ? slideshow.url : "#";

                        <a href="@url" class="bottom-banner banner" style="background-image: url('/Uploads/slideshow/@Html.Raw(slideshow.image)');">
                            <div class="container">

                                @{
                                    if (slideshow.header != null)
                                    {
                                        <div class="header overfooter">@slideshow.header</div>
                                    }
                                }

                            </div>
                        </a>
                    }
                }
            </div>
        </div>
    </div>
    <div class="row articles">
        <div class="col-md-12 no-gutters">
            <div class="row">
                <h2 class="col-md-12">
                    <a href="/blog">
                        Aktuálne články
                    </a>
                </h2>
            </div>
            <div class="row">

                @{
                    var articles = Model.BlogModel.OrderByDescending(o => o.id).Take(4);
                    foreach (var article in articles)
                    {
                        <a href="clanok/@article.slug" class="col-md-3 article col-6 pl-1 pr-1">
                            <img src="uploads/@article.image">
                            <div class="header">@article.title</div>
                            <div class="date"><i class="bi bi-alarm"></i><span>@DateTime.Parse(@article.date).ToString("dd.MM.yyyy")</span></div>
                        </a>
                    }
                }
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
<script src="~/Scripts/add_to_session.js"></script>


<script>
    $(document).ready(function () {
        $('.top-banner-wrapper').slick();
        $('.middle-banner-wrapper').slick();
        $('.products-row').slick({
                    infinite: true,
                    slidesToShow: 5,
                    slidesToScroll: 5,
                    responsive: [
                        {
                            breakpoint: 1024,
                            settings: {
                                slidesToShow: 4,
                                slidesToScroll: 4,
                                infinite: true,
                                dots: true
                            }
                        },
                        {
                            breakpoint: 600,
                            settings: {
                                slidesToShow: 2,
                                slidesToScroll: 2
                            }
                        },
                        {
                            breakpoint: 480,
                            settings: {
                                slidesToShow: 2,
                                slidesToScroll: 2
                            }
                        }]
                });
       
        $("#Subscribeform a.rect-button").click(function (e) {
            e.preventDefault();

            if (isEmail($("#subscriberEmail").val()) && $("#hp-newsletter-checkbox").is(":checked")) {

                $("#Subscribeform input").removeClass("error");
                $(".hp-newsletter label[for=hp-newsletter-checkbox]").removeClass("error");

                $("#Subscribeform").submit();

            } else if (!isEmail($("#subscriberEmail").val())) {

                $("#Subscribeform input").addClass("error");

            } else if (!$("#hp-newsletter-checkbox").is(":checked")) {

                $("#Subscribeform input").removeClass("error");
                $(".hp-newsletter label[for=hp-newsletter-checkbox]").addClass("error");
            }
        });

        function isEmail(email) {
            var regex = /^([a-zA-Z0-9_.+-])+\@@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
            return regex.test(email);
        }
    });

    //show 4 elements at beginning
    var nblock = 7;
    //how much elements should be added/removed
    var add_remove = 8;

    $(".categoryblock:gt(" + nblock + ")").hide();

    $("#showmore").click(function (e) {

        if ((nblock + 1) < $('.categoryblock').length)
            nblock = nblock + add_remove;

        $(".categoryblock").fadeIn();
        $(".categoryblock:gt(" + nblock + ")").hide();
        $("#showless").show();
    });

    $("#showless").click(function (e) {

        if (nblock > add_remove) {
            nblock = nblock - add_remove;
        }
        if (nblock < add_remove) {
            $("#showless").hide();
        }

        $(".categoryblock:gt(" + nblock + ")").fadeOut();

    });
</script>
